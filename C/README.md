# Prolog

## 1. Computer == Calculator<br>
	명령을 읽고 실행한다
 
### 1-1 누가 읽고 실행하나?
	CPU(중앙처리장치)
	- 연산을 직접 수행한다
	- 64비트의 CPU에는 64비트를 가진 레지스터가 16개 있다
	- 레지스터 : CPU가 연산을 수행하기 위해 데이터를 저장하는 공간
	- 각 레지스터에 64비트의 데이터를 담을 수 있다
	  (CPU에 최대한 박을 수 있는 데이터의 크기 = 128바이트(8byte*16))

* CPU가 명령어를 실행하기 위해서는 두가지 조건이 필요하다
	* 실행할 명령어를 읽어야 하고 연산된 결과를 어디엔가 저장해야한다<br>
	* 어딘가 명령어를 저장하고 읽어올 곳이 필요하지만 CPU는 공간이 작아 명령어를 저장할 공간이 부족하다

> 연산은 정확히 말하자면 CPU의 자그마한 레지스터 상에서 수행된다<br>
CPU에는 캐시가 있어서 메모리 접근 횟수를 줄일 수 있다

### 1-2 어디서 명령을 읽나?
	RAM(임의접근메모리)
	- CPU는 무슨 연산을 할 지 알려주는 명령어와, 명령어를 실행하기 위해 필요로 하는 데이터를 메모리(RAM)에서 읽는다
	- 8GB의 RAM은 CPU에 비해 6천만배 이상 크다
	- 휘발성의 성질을 가져 영구적으로 저장할 수 없다
	- 영구적으로 저장할 수 있는 곳은 하드디스크이다(HDD, SSD)
	- 하드 디스크에 저장되어있는 프로그램 위치를 찾아 램에 복사하고 CPU는 램에서 명령어를 읽어들여 실행한다

* CPU가 RAM에서 데이터를 읽기 위해서는 해당 데이터가 RAM의 어느 위치에 있는지 알아야한다
	* RAM의 모든 데이터는 1byte단위로, 0번을 시작으로 고유의 주소가 부여된다
	* 메모리 한칸 당 1byte(2진수로 8자리 수)짜리 데이터를 보관할 수 있다.
	* CPU는 RAM의 데이터 주소를 통해 데이터가 어디부터 시작인지, 어디까지 읽어야 하는지 알 수 있다.
	
	```
	ex) CPU에게 램의 주소값 0x1234 위치에 1byte 만큼 '3' 이라는 데이터를 저장하고 싶다
	1. 먼저 CPU의 A 레지스터에 RAM의 주소값 '0x1234'을 저장한다
	2. A에 저장된 RAM의 주소값에서 부터 1byte 부분까지 3을 저장하라는 명령어를 내린다
	3. CPU는 '레지스터 A에 저장되어 있는 RAM의 주소값에 3이라는 데이터를 저장'하라는 명령어를 실행한다
	4. RAM에는 '3'이라는 데이터가 저장된다
	```
즉, CPU는 RAM의 주소값을 레지스터에 받아 RAM에 어디에 접근할지 명령한다
CPU가 명령하기 위해서는 해당 명령어를 어디선가 가져와야한다

### 1-3. 무엇이 CPU에게 명령어를 제공하나?
	프로그램 실행으로 CPU에게 명령어를 제공
	- 프로그램은 실행할 명령어와 데이터들의 집합체이다
	- 프로그램을 실행하면 컴퓨터 운영체제가 CPU에게 RAM에 위치해 있는 프로그램의 시작점을 알려준다
	- 그 이후로 CPU는 해당 위치부터 명령어를 읽어 나간다
> CPU가 현재 RAM의 어디에서 명령어를 읽어야 할지 계속 알아야 한다<br>
> 이를위해 CPU 안에 지금 읽어들일 명령어의 위치만을 보관하는 특별한 레지스터(RIP)가 존재한다

그렇다면 여러가지 프로그램이 실행되고 있는 상태에서 어느 프로그램이 명령한 RAM의 주소값이 다른 프로그램이 실행되고 있는 RAM의 주소값일 경우 프로그램끼리 충돌할 수 있지 않나?

### 1-4 프로그램끼리 명령한 RAM의 주소값들이 곂치지는 않는가?
	실제로 CPU가 보는 0x1234라는 주소값과 실제 RAM의 0x1234 주소값은 다르다
	- CPU가 참조하는 0x1234라는 주소값은 1대1 변환 과정에 의해 실제 메모리 주소값을 변환한다(페이징)
	- CPU가 참조하는 RAM 주소값 = 가상 메모리
	- 변환 과정을 통해 참조하게 될 실제 RAM의 주소값 = 물리 메모리
	
	- 흔히 RAM의 크기는 8기가, 16기가지만 페이징을 통해 가상 메모리 공간을 사용할 수 있기 때문에 
	  2의 64승 byte(64bit 운영체제) 가상 메모리 공간 안에서 자유롭게 사용 가능하다
	
> 페이지 - 변환이 되는 최소의 메모리 단위, 약 4KB<br>
> 페이지 테이블은 각 프로그램마다 하나씩 가지고 있어 서로 다른 물리 메모리를 참조할 수 있다<br>
> CPU에서 참조하는 주소값은 실제 물리 메모리 주소값이 아니라 가상 메모리 주소값이다<br>
> 가상 메모리 주소값은 각 프로그램의 페이지 테이블을 통해서 실제 메모리 주소값을 변환된다<br>
